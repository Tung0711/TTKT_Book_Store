<!doctype html>
<html lang="en">
<head>
    <th:block th:insert="/admin/layout/header.html"></th:block>
</head>
<body>
<!-- loader Start -->
<div id="loading">
    <div id="loading-center">
    </div>
</div>
<!-- loader END -->
<!-- Wrapper Start -->
<div class="wrapper">
    <!-- Sidebar  -->
    <div class="iq-sidebar">
        <div class="iq-sidebar-logo d-flex justify-content-between">
            <a th:href="@{admin-dashboard}" class="header-logo">
                <img th:src="@{/adm/images/logo.png}" class="img-fluid rounded-normal" alt="">
                <div class="logo-title">
                    <span class="text-primary text-uppercase">BookLand</span>
                </div>
            </a>
            <div class="iq-menu-bt-sidebar">
                <div class="iq-menu-bt align-self-center">
                    <div class="wrapper-menu">
                        <div class="main-circle"><i class="las la-bars"></i></div>
                    </div>
                </div>
            </div>
        </div>
        <div id="sidebar-scrollbar">
            <nav class="iq-sidebar-menu">
                <ul id="iq-sidebar-toggle" class="iq-menu">
                    <li class="active active-menu">
                        <a href="#admin" class="iq-waves-effect" data-toggle="collapse" aria-expanded="true"><span
                                class="ripple rippleEffect"></span><i
                                class="las la-home iq-arrow-left"></i><span>Admin</span><i
                                class="ri-arrow-right-s-line iq-arrow-right"></i></a>
                        <ul id="admin" class="iq-submenu collapse show" data-parent="#iq-sidebar-toggle">
                            <li><a th:href="@{admin-dashboard}"><i class="las la-house-damage"></i>Dashboard</a>
                            </li>
                            <li><a th:href="@{admin-category}"><i class="ri-list-check-2"></i>Categories</a></li>
                            <li><a th:href="@{admin-books}"><i class="ri-book-2-line"></i>Books</a>
                            </li>
                            <li><a th:href="@{admin-users}"><i class="ri-user-line"></i>Users</a></li>
                            <li><a th:href="@{admin-vendor}"><i class="ri-shield-user-line"></i>Vendor</a></li>
                            <li><a th:href="@{admin-invoice}"><i class="ri-folder-line"></i>Invoice</a></li>
                            <li><a th:href="@{admin-orders}"><i class="ri-shopping-cart-line"></i>Orders</a></li>
                            <li class="nav-item iq-dropdown">
                                <a href="#report" class="iq-waves-effect" data-toggle="collapse"
                                   aria-expanded="true"><span
                                        class="ripple rippleEffect"></span><i
                                        class="ri-file-chart-line iq-arrow-left"></i><span>Report</span><i
                                        class="ri-arrow-right-s-line iq-arrow-right"></i></a>
                                <ul id="report" class="iq-submenu collapse">
                                    <li>
                                        <a th:href="@{/admin/revenue-report}">Revenue Report</a>
                                    </li>
                                    <li>
                                        <a th:href="@{/admin/sales-report}">Sales Report</a>
                                    </li>
                                    <li class="active">
                                        <a th:href="@{/admin/import-report}">Import Report</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
            <div id="sidebar-bottom" class="p-3 position-relative">
                <div class="iq-card">
                    <div class="iq-card-body">
                        <div class="sidebar-bottom-content">
                            <div class="image"><img th:src="@{/adm/images/page-img/side-bkg.png}" alt=""></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- TOP Nav Bar -->
    <div class="iq-top-navbar">
        <div class="iq-navbar-custom">
            <nav class="navbar navbar-expand-lg navbar-light p-0">
                <div class="iq-menu-bt d-flex align-items-center">
                    <div class="wrapper-menu">
                        <div class="main-circle"><i class="las la-bars"></i></div>
                    </div>
                    <div class="iq-navbar-logo d-flex justify-content-between">
                        <a th:href="@{admin-dashboard}" class="header-logo">
                            <img th:src="@{/adm/images/logo.png}" class="img-fluid rounded-normal" alt="">
                            <div class="logo-title">
                                <span class="text-primary text-uppercase">BookLand</span>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="navbar-breadcrumb">
                    <h5 class="mb-0">Books</h5>
                    <nav aria-label="breadcrumb">
                        <ul class="breadcrumb">
                            <li class="breadcrumb-item"><a th:href="@{admin-dashboard}">Admin</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Books</li>
                        </ul>
                    </nav>
                </div>
                <div class="iq-search-bar">
                    <form action="#" class="searchbox">
                        <input type="text" class="text search-input" placeholder="Search Here...">
                        <a class="search-link" href="#"><i class="ri-search-line"></i></a>
                    </form>
                </div>
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-label="Toggle navigation">
                    <i class="ri-menu-3-line"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto navbar-list">
                        <li class="nav-item nav-icon search-content">
                            <a href="#" class="search-toggle iq-waves-effect text-gray rounded">
                                <i class="ri-search-line"></i>
                            </a>
                            <form action="#" class="search-box p-0">
                                <input type="text" class="text search-input" placeholder="Type here to search...">
                                <a class="search-link" href="#"><i class="ri-search-line"></i></a>
                            </form>
                        </li>
                        <li class="line-height pt-3">
                            <a href="#" class="search-toggle iq-waves-effect d-flex align-items-center">
                                <img th:src="@{/adm/images/user/001.jpg}" class="img-fluid rounded-circle mr-3"
                                     alt="user">
                                <div class="caption">
                                    <h6 class="mb-1 line-height">Havoc</h6>
                                    <p class="mb-0 text-primary">$20.32</p>
                                </div>
                            </a>
                            <div class="iq-sub-dropdown iq-user-dropdown">
                                <div class="iq-card shadow-none m-0">
                                    <div class="iq-card-body p-0 ">
                                        <div class="bg-primary p-3">
                                            <h5 class="mb-0 text-white line-height">Hello Havoc</h5>
                                            <span class="text-white font-size-12">Available</span>
                                        </div>
                                        <div class="d-inline-block w-100 text-center p-3">
                                            <a class="bg-primary iq-sign-btn" th:href="@{/sign-in}" role="button">Sign
                                                out<i
                                                        class="ri-login-box-line ml-2"></i></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <!-- TOP Nav Bar END -->
    <!-- Page Content  -->
    <div id="content-page" class="content-page">
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-12">
                    <div class="card card-table">
                        <div class="card-body">
                            <div class="title-header option-title">
                                <h5>Báo cáo nhập hàng</h5>
                            </div>
                            <form id="myForm" method="get">
                                <div class="breadcrumb-wrapper breadcrumb-contacts d-flex align-items-end"
                                     style="justify-content: flex-start">
                                    <div style="margin-right: 10px">
                                        <label class="form-label">Nhà cung cấp</label>
                                        <select name="vendorId" id="vendorId" class="form-control"
                                                th:value="${selectedVendorId}">
                                            <option value="">Chọn nhà cung cấp</option>
                                            <option th:each="item :${vendors}" th:value="${item.id}"
                                                    th:text="${item.vendorName}"
                                                    th:selected="${#strings.equals(selectedVendorId, item.id)}"></option>
                                        </select>
                                    </div>
                                    <div style="margin-right: 10px">
                                        <label class="form-label">Danh mục</label>
                                        <select name="categoryId" id="categoryId" class="form-control"
                                                th:selected="${selectedCategoryId}">
                                            <option value="">Chọn danh mục sản phẩm</option>
                                            <option th:each="item :${categories}" th:value="${item.id}"
                                                    th:text="${item.catalogName}"
                                                    th:selected="${#strings.equals(selectedCategoryId, item.id)}"></option>
                                        </select>
                                    </div>
                                    <div style="margin-right: 10px">
                                        <label class="form-label">Ngày bắt đầu</label>
                                        <input type="date" id="createdDateStart" name="createdDateStart"
                                               th:value="${createdDateStart}" class="form-control">
                                    </div>
                                    <div style="margin-right: 10px">
                                        <label class="form-label">Ngày kết thúc</label>
                                        <input type="date" id="createdDateEnd" name="createdDateEnd"
                                               th:value="${createdDateEnd}"
                                               class="form-control">
                                    </div>
                                    <div style="margin-right: 10px; margin-top: 32px">
                                        <a class="btn btn-primary mb-2 btn-pill" href="/admin/import-report">Xóa
                                            lọc</a>
                                    </div>
                                </div>
                                <div style="margin-bottom: 15px;margin-top: 10px">
                                    <label>
                                        <button type="submit" class="btn btn-primary mb-2 btn-pill"
                                                onclick="setAction('/admin/import-report')">Thống kê
                                        </button>
                                    </label>
                                    <label>
                                        <button type="submit" class="btn btn-primary mb-2 btn-pill"
                                                onclick="setAction('/admin/exportExcelImport')">Xuất file
                                        </button>
                                    </label>
                                </div>
                            </form>
                            <div class="table-responsive">
                                <table class="data-tables table table-striped table-bordered" style="width:100%">
                                    <thead>
                                    <tr>
                                        <th width="5%">STT</th>
                                        <th width="26%">Tên sách</th>
                                        <th width="21%">Tên nhà cung cấp</th>
                                        <th width="16%">Tên danh mục</th>
                                        <th width="16%">Số lượng nhập</th>
                                        <th width="16%">Tổng tiền</th>
                                    </tr>
                                    </thead>
                                    <tbody>

                                    <tr th:each="item,index:${importReport}">
                                        <td th:text="*{index.count}"></td>
                                        <td th:text="${item.bookName}"></td>
                                        <td th:text="${item.vendorName}"></td>
                                        <td th:text="${item.catalogName}"></td>
                                        <td th:text="${item.inputQuantity}"></td>
                                        <td th:text="${#numbers.formatDecimal(item.totalAmount, 0, 'COMMA', 0, 'POINT') + ' VND'}"
                                            class="totalAmountElement"></td>
                                    </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Wrapper END -->
<!-- Footer -->
<th:block th:insert="/admin/layout/footer.html"></th:block>
<!-- Footer END -->
<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script th:src="@{/adm/js/jquery.min.js}"></script>
<script th:src="@{/adm/js/popper.min.js}"></script>
<script th:src="@{/adm/js/bootstrap.min.js}"></script>
<script th:src="@{/adm/js/jquery.dataTables.min.js}"></script>
<script th:src="@{/adm/js/dataTables.bootstrap4.min.js}"></script>
<!-- Appear JavaScript -->
<script th:src="@{/adm/js/jquery.appear.js}"></script>
<!-- Countdown JavaScript -->
<script th:src="@{/adm/js/countdown.min.js}"></script>
<!-- Counterup JavaScript -->
<script th:src="@{/adm/js/waypoints.min.js}"></script>
<script th:src="@{/adm/js/jquery.counterup.min.js}"></script>
<!-- Wow JavaScript -->
<script th:src="@{/adm/js/wow.min.js}"></script>
<!-- Apexcharts JavaScript -->
<script th:src="@{/adm/js/apexcharts.js}"></script>
<!-- Slick JavaScript -->
<script th:src="@{/adm/js/slick.min.js}"></script>
<!-- Select2 JavaScript -->
<script th:src="@{/adm/js/select2.min.js}"></script>
<!-- Owl Carousel JavaScript -->
<script th:src="@{/adm/js/owl.carousel.min.js}"></script>
<!-- Magnific Popup JavaScript -->
<script th:src="@{/adm/js/jquery.magnific-popup.min.js}"></script>
<!-- Smooth Scrollbar JavaScript -->
<script th:src="@{/adm/js/smooth-scrollbar.js}"></script>
<!-- lottie JavaScript -->
<script th:src="@{/adm/js/lottie.js}"></script>
<!-- am core JavaScript -->
<script th:src="@{/adm/js/core.js}"></script>
<!-- am charts JavaScript -->
<script th:src="@{/adm/js/charts.js}"></script>
<!-- am animated JavaScript -->
<script th:src="@{/adm/js/animated.js}"></script>
<!-- am kelly JavaScript -->
<script th:src="@{/adm/js/kelly.js}"></script>
<!-- am maps JavaScript -->
<script th:src="@{/adm/js/maps.js}"></script>
<!-- am worldLow JavaScript -->
<script th:src="@{/adm/js/worldLow.js}"></script>
<!-- Raphael-min JavaScript -->
<script th:src="@{/adm/js/raphael-min.js}"></script>
<!-- Morris JavaScript -->
<script th:src="@{/adm/js/morris.js}"></script>
<!-- Morris min JavaScript -->
<script th:src="@{/adm/js/morris.min.js}"></script>
<!-- Flatpicker Js -->
<script th:src="@{/adm/js/flatpickr.js}"></script>
<!-- Style Customizer -->
<script th:src="@{/adm/js/style-customizer.js}"></script>
<!-- Chart Custom JavaScript -->
<script th:src="@{/adm/js/chart-custom.js}"></script>
<!-- Custom JavaScript -->
<script th:src="@{/adm/js/custom.js}"></script>
<script>
    document.getElementById("myForm").addEventListener("submit", function (event) {
        // Lấy tất cả các input và select trong form
        var inputs = this.querySelectorAll("input, select");

        // Duyệt qua từng input và select
        inputs.forEach(function (input) {
            // Nếu giá trị là rỗng, loại bỏ thuộc tính name để không gửi lên server
            if (!input.value) {
                input.removeAttribute("name");
            }
        });
    });

    document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".date").forEach(function (tdElement) {
            // Lấy chuỗi ngày từ nội dung của phần tử
            var dateString = tdElement.innerText;

            // Tách chuỗi ngày thành các phần tử riêng biệt
            var dateParts = dateString.split("-");

            // Tạo một đối tượng Date từ các phần tử ngày
            var dateObject = new Date(dateParts[0], dateParts[1] - 1, dateParts[2]);

            // Chuyển đổi định dạng ngày thành 'dd-mm-yyyy'
            var formattedDate = dateObject.getDate() + '-' + (dateObject.getMonth() + 1) + '-' + dateObject.getFullYear();

            // Đặt nội dung mới cho phần tử
            tdElement.innerText = formattedDate;
        });

    });
</script>
<script>
    function setAction(action) {
        document.getElementById("myForm").action = action;
    }
</script>
</body>
</html>